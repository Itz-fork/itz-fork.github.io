let termBuffer;const buttons=document.querySelectorAll(".nav button"),islands=document.querySelectorAll(".island");function isDesktop(){return window.matchMedia("only screen and (min-device-width: 800px)").matches}let cachedIsDesktop=isDesktop();window.addEventListener("resize",()=>{cachedIsDesktop=isDesktop()}),buttons.forEach(e=>{e.addEventListener("click",()=>{let t=document.getElementById(e.dataset.target);t&&(buttons.forEach(e=>{e.classList.remove("active"),e.removeAttribute("aria-current")}),e.classList.add("active"),e.setAttribute("aria-current","page"),cachedIsDesktop?(islands.forEach(e=>e.classList.toggle("active",e===t)),t.focus({preventScroll:!0})):t.scrollIntoView({behavior:"smooth",block:"start"}))})}),document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".custom-cursor");e&&(document.addEventListener("mousemove",t=>{cachedIsDesktop?(e.style.left=t.clientX+"px",e.style.top=t.clientY+"px"):e.classList.add("hide")}),document.body.addEventListener("mouseleave",()=>e.classList.add("hide")),document.body.addEventListener("mouseenter",()=>e.classList.remove("hide")),document.body.addEventListener("mouseenter",t=>{t.target.closest('a, button, input[type="submit"], [data-cursor-hover]')&&isDesktop()&&e.classList.add("hover")},!0),document.body.addEventListener("mouseleave",t=>{t.target.closest('a, button, input[type="submit"], [data-cursor-hover]')&&e.classList.remove("hover")},!0))});const term=document.getElementById("term"),replayBtn=document.querySelector(".term-replay"),terminalLines=["Booting runtime...","Loading config... OK","Connecting to database... OK","Starting worker pool... OK","","GET /about HTTP/1.1","Host: hirusha.dev","","HTTP/1.1 200 OK","Content-Type: application/json","Cache-Control: no-store","","{",'  "name": "Hirusha Himath",','  "role": "Backend & Automation Engineer",','  "location": "Sri Lanka",','  "focus": [','    "backend systems",','    "automation",','    "APIs",','    "reliability-first design"',"  ],",'  "availability": "open_to_work"',"}"];function playTerminal(){termBuffer&&clearInterval(termBuffer),term.textContent="",lineIndex=0,termBuffer=setInterval(()=>{if(lineIndex>=terminalLines.length){clearInterval(termBuffer),termBuffer=null;return}term.textContent+=terminalLines[lineIndex]+"\n",lineIndex++},180)}playTerminal(),replayBtn?.addEventListener("click",playTerminal);const messageTextarea=document.querySelector("#contact textarea");if(messageTextarea){const e=()=>{messageTextarea.style.height="auto",messageTextarea.style.height=messageTextarea.scrollHeight+"px"};messageTextarea.addEventListener("input",e),e()}const form=document.getElementById("contact-form"),statusEl=document.getElementById("form-status");function isValidEmail(e){return e.length<=254&&/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}$/.test(e)}function setStatus(e,t=!1){statusEl.textContent=e,statusEl.style.color=t?"#ff6b6b":"#2dd4bf"}form&&form.addEventListener("submit",async e=>{e.preventDefault();let t=form?.querySelector('button[type="submit"]'),s=form.email.value.trim(),a=form.msg.value.trim();if(!s)return void setStatus("Email is required.",!0);if(!isValidEmail(s))return void setStatus("Please enter a valid email address.",!0);if(!a)return void setStatus("Message is required.",!0);if(a.length<10)return void setStatus("Message must be at least 10 characters.",!0);if(a.length>3e3)return void setStatus("Message is too long.",!0);setStatus("Sendingâ€¦"),t.disabled=!0,form.setAttribute("aria-busy","true");try{if(!(await fetch("https://contact.git-itzfork.workers.dev",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:"Portfolio Contact",email:s,subject:"New contact from portfolio",msg:a})})).ok)throw Error("Request failed");setStatus("Message sent successfully."),form.reset(),t.disabled=!1,form.removeAttribute("aria-busy")}catch(e){setStatus("Failed to send message. Try again later.",!0),t.disabled=!1,form.removeAttribute("aria-busy")}});
//# sourceMappingURL=personal_site.7e6a783f.js.map
