const buttons=document.querySelectorAll(".nav button"),islands=document.querySelectorAll(".island");function isDesktop(){return window.matchMedia("only screen and (min-device-width: 800px)").matches}let cachedIsDesktop=isDesktop();window.addEventListener("resize",()=>{cachedIsDesktop=isDesktop()}),buttons.forEach(e=>{e.addEventListener("click",()=>{let t=document.getElementById(e.dataset.target);t&&(buttons.forEach(e=>{e.classList.remove("active"),e.removeAttribute("aria-current")}),e.classList.add("active"),e.setAttribute("aria-current","page"),cachedIsDesktop?(islands.forEach(e=>e.classList.toggle("active",e===t)),t.focus({preventScroll:!0})):t.scrollIntoView({behavior:"smooth",block:"start"}))})}),document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".custom-cursor");if(!e)return;let t=0,a=0,s=null;document.addEventListener("mousemove",n=>{!cachedIsDesktop||(t=n.clientX,a=n.clientY,s||(s=requestAnimationFrame(()=>{e.style.transform=`translate(${t}px, ${a}px) translate(-50%, -50%)`,s=null})))}),document.body.addEventListener("mouseleave",()=>e.classList.add("hide")),document.body.addEventListener("mouseenter",()=>e.classList.remove("hide")),document.body.addEventListener("mouseover",t=>{t.target.closest('a, button, input[type="submit"], [data-cursor-hover]')&&cachedIsDesktop&&e.classList.add("hover")}),document.body.addEventListener("mouseout",t=>{!cachedIsDesktop||t.relatedTarget&&t.target.contains(t.relatedTarget)||t.target.closest('a, button, input[type="submit"], [data-cursor-hover]')&&e.classList.remove("hover")})});const term=document.getElementById("term"),replayBtn=document.querySelector(".term-replay"),terminalLines=["Booting runtime...","Loading config... OK","Connecting to database... OK","Starting worker pool... OK","","GET /about HTTP/1.1","Host: hirusha.dev","","HTTP/1.1 200 OK","Content-Type: application/json","Cache-Control: no-store","","{",'  "name": "Hirusha Himath",','  "role": "Backend & Automation Engineer",','  "location": "Sri Lanka",','  "focus": [','    "backend systems",','    "automation",','    "APIs",','    "reliability-first design"',"  ],",'  "availability": "open_to_work"',"}"];let lineIndex=0;function playTerminal(){term.textContent="",lineIndex=0,!function e(){lineIndex>=terminalLines.length||(term.textContent+=terminalLines[lineIndex++]+"\n",setTimeout(e,180))}()}playTerminal(),replayBtn?.addEventListener("click",playTerminal);const messageTextarea=document.querySelector("#contact textarea");if(messageTextarea){const e=()=>{messageTextarea.style.height="auto",messageTextarea.style.height=messageTextarea.scrollHeight+"px"};messageTextarea.addEventListener("input",e),e()}const form=document.getElementById("contact-form"),statusEl=document.getElementById("form-status");function isValidEmail(e){return e.length<=254&&/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}$/.test(e)}function setStatus(e,t=!1){statusEl.textContent=e,statusEl.style.color=t?"#ff6b6b":"#2dd4bf"}form&&form.addEventListener("submit",async e=>{e.preventDefault();let t=form?.querySelector('button[type="submit"]'),a=form.email.value.trim(),s=form.msg.value.trim();if(!a)return void setStatus("Email is required.",!0);if(!isValidEmail(a))return void setStatus("Please enter a valid email address.",!0);if(!s)return void setStatus("Message is required.",!0);if(s.length<10)return void setStatus("Message must be at least 10 characters.",!0);if(s.length>3e3)return void setStatus("Message is too long.",!0);setStatus("Sendingâ€¦"),t.disabled=!0,form.setAttribute("aria-busy","true");try{if(!(await fetch("https://contact.git-itzfork.workers.dev",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({name:"Portfolio Contact",email:a,subject:"New contact from portfolio",msg:s})})).ok)throw Error("Request failed");setStatus("Message sent successfully."),form.reset(),t.disabled=!1,form.removeAttribute("aria-busy")}catch(e){setStatus("Failed to send message. Try again later.",!0),t.disabled=!1,form.removeAttribute("aria-busy")}});
//# sourceMappingURL=personal_site.0e8a5371.js.map
