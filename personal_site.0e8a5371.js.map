{"mappings":"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","sources":["<anon>","src/main.js"],"sourcesContent":["// Navigation logic.\nconst buttons = document.querySelectorAll('.nav button');\nconst islands = document.querySelectorAll('.island');\n// Detect if device is desktop\nfunction isDesktop() {\n    return window.matchMedia('only screen and (min-device-width: 800px)').matches;\n}\nlet cachedIsDesktop = isDesktop();\nwindow.addEventListener('resize', ()=>{\n    cachedIsDesktop = isDesktop();\n});\nbuttons.forEach((btn)=>{\n    btn.addEventListener('click', ()=>{\n        const target = document.getElementById(btn.dataset.target);\n        if (!target) return;\n        // Update active nav state\n        buttons.forEach((b)=>{\n            b.classList.remove('active');\n            b.removeAttribute('aria-current');\n        });\n        btn.classList.add('active');\n        btn.setAttribute('aria-current', 'page');\n        // Desktop = app-style swap\n        if (cachedIsDesktop) {\n            islands.forEach((i)=>i.classList.toggle('active', i === target));\n            target.focus({\n                preventScroll: true\n            });\n        } else target.scrollIntoView({\n            behavior: 'smooth',\n            block: 'start'\n        });\n    });\n});\n// Cursor behavior (desktop only)\ndocument.addEventListener('DOMContentLoaded', ()=>{\n    const cursor = document.querySelector('.custom-cursor');\n    if (!cursor) return;\n    let mouseX = 0, mouseY = 0;\n    let rafId = null;\n    document.addEventListener('mousemove', (e)=>{\n        if (!cachedIsDesktop) return;\n        mouseX = e.clientX;\n        mouseY = e.clientY;\n        if (rafId) return;\n        rafId = requestAnimationFrame(()=>{\n            cursor.style.transform = `translate(${mouseX}px, ${mouseY}px) translate(-50%, -50%)`;\n            rafId = null;\n        });\n    });\n    document.body.addEventListener('mouseleave', ()=>cursor.classList.add('hide'));\n    document.body.addEventListener('mouseenter', ()=>cursor.classList.remove('hide'));\n    document.body.addEventListener('mouseover', (e)=>{\n        const el = e.target.closest('a, button, input[type=\"submit\"], [data-cursor-hover]');\n        if (el && cachedIsDesktop) cursor.classList.add('hover');\n    });\n    document.body.addEventListener('mouseout', (e)=>{\n        if (!cachedIsDesktop) return;\n        if (e.relatedTarget && e.target.contains(e.relatedTarget)) return;\n        const el = e.target.closest('a, button, input[type=\"submit\"], [data-cursor-hover]');\n        if (el) cursor.classList.remove('hover');\n    });\n});\n// Fake terminal boot\nconst term = document.getElementById('term');\nconst replayBtn = document.querySelector('.term-replay');\nconst terminalLines = [\n    'Booting runtime...',\n    'Loading config... OK',\n    'Connecting to database... OK',\n    'Starting worker pool... OK',\n    '',\n    'GET /about HTTP/1.1',\n    'Host: hirusha.dev',\n    '',\n    'HTTP/1.1 200 OK',\n    'Content-Type: application/json',\n    'Cache-Control: no-store',\n    '',\n    '{',\n    '  \"name\": \"Hirusha Himath\",',\n    '  \"role\": \"Backend & Automation Engineer\",',\n    '  \"location\": \"Sri Lanka\",',\n    '  \"focus\": [',\n    '    \"backend systems\",',\n    '    \"automation\",',\n    '    \"APIs\",',\n    '    \"reliability-first design\"',\n    '  ],',\n    '  \"availability\": \"open_to_work\"',\n    '}'\n];\nlet lineIndex = 0;\nfunction playTerminal() {\n    term.textContent = '';\n    lineIndex = 0;\n    function step() {\n        if (lineIndex >= terminalLines.length) return;\n        term.textContent += terminalLines[lineIndex++] + '\\n';\n        setTimeout(step, 180);\n    }\n    step();\n}\n// Initial run\nplayTerminal();\n// Replay handler\nreplayBtn?.addEventListener('click', playTerminal);\n// Auto-grow textarea in contact form.\nconst messageTextarea = document.querySelector('#contact textarea');\nif (messageTextarea) {\n    const autoResize = ()=>{\n        messageTextarea.style.height = 'auto';\n        messageTextarea.style.height = messageTextarea.scrollHeight + 'px';\n    };\n    messageTextarea.addEventListener('input', autoResize);\n    autoResize();\n}\n// Contact form submission logic\nconst form = document.getElementById('contact-form');\nconst statusEl = document.getElementById('form-status');\nif (form) form.addEventListener('submit', async (e)=>{\n    e.preventDefault();\n    const submitBtn = form?.querySelector('button[type=\"submit\"]');\n    const email = form.email.value.trim();\n    const msg = form.msg.value.trim();\n    // Basic validation\n    // Email empty\n    if (!email) {\n        setStatus('Email is required.', true);\n        return;\n    }\n    // Email format\n    if (!isValidEmail(email)) {\n        setStatus('Please enter a valid email address.', true);\n        return;\n    }\n    // Message empty\n    if (!msg) {\n        setStatus('Message is required.', true);\n        return;\n    }\n    // Message length\n    if (msg.length < 10) {\n        setStatus('Message must be at least 10 characters.', true);\n        return;\n    }\n    // Check for message length limit (pls dont be stupid)\n    if (msg.length > 3000) {\n        setStatus('Message is too long.', true);\n        return;\n    }\n    const payload = {\n        name: 'Portfolio Contact',\n        email,\n        subject: 'New contact from portfolio',\n        msg\n    };\n    setStatus(\"Sending\\u2026\");\n    submitBtn.disabled = true;\n    form.setAttribute('aria-busy', 'true');\n    try {\n        const res = await fetch('https://contact.git-itzfork.workers.dev', {\n            method: 'POST',\n            headers: {\n                'content-type': 'application/json'\n            },\n            body: JSON.stringify(payload)\n        });\n        if (!res.ok) throw new Error('Request failed');\n        setStatus('Message sent successfully.');\n        form.reset();\n        submitBtn.disabled = false;\n        form.removeAttribute('aria-busy');\n    } catch (err) {\n        setStatus('Failed to send message. Try again later.', true);\n        submitBtn.disabled = false;\n        form.removeAttribute('aria-busy');\n    }\n});\n// Email validation\nfunction isValidEmail(email) {\n    const EMAIL_REGEX = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@([a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,}$/;\n    return email.length <= 254 && EMAIL_REGEX.test(email);\n}\n// Status message handler\nfunction setStatus(message, isError = false) {\n    statusEl.textContent = message;\n    statusEl.style.color = isError ? '#ff6b6b' : '#2dd4bf';\n}\n\n//# sourceMappingURL=personal_site.0e8a5371.js.map\n","// Navigation logic.\n\nconst buttons = document.querySelectorAll('.nav button');\nconst islands = document.querySelectorAll('.island');\n\n\n// Detect if device is desktop\nfunction isDesktop() {\n  return window.matchMedia('only screen and (min-device-width: 800px)').matches;\n}\nlet cachedIsDesktop = isDesktop();\nwindow.addEventListener('resize', () => {\n  cachedIsDesktop = isDesktop();\n});\n\nbuttons.forEach(btn => {\n  btn.addEventListener('click', () => {\n    const target = document.getElementById(btn.dataset.target);\n    if (!target) return;\n\n    // Update active nav state\n    buttons.forEach(b => {\n      b.classList.remove('active');\n      b.removeAttribute('aria-current');\n    });\n\n    btn.classList.add('active');\n    btn.setAttribute('aria-current', 'page');\n\n    // Desktop = app-style swap\n    if (cachedIsDesktop) {\n      islands.forEach(i => i.classList.toggle('active', i === target));\n      target.focus({ preventScroll: true });\n    }\n    // Mobile = normal scroll\n    else {\n      target.scrollIntoView({ behavior: 'smooth', block: 'start' });\n    }\n  });\n});\n\n// Cursor behavior (desktop only)\ndocument.addEventListener('DOMContentLoaded', () => {\n  const cursor = document.querySelector('.custom-cursor');\n  if (!cursor) return;\n\n  let mouseX = 0, mouseY = 0;\n  let rafId = null;\n\n  document.addEventListener('mousemove', (e) => {\n    if (!cachedIsDesktop) return;\n\n    mouseX = e.clientX;\n    mouseY = e.clientY;\n\n    if (rafId) return;\n\n    rafId = requestAnimationFrame(() => {\n      cursor.style.transform =\n        `translate(${mouseX}px, ${mouseY}px) translate(-50%, -50%)`;\n      rafId = null;\n    });\n  });\n\n\n  document.body.addEventListener('mouseleave', () => cursor.classList.add('hide'));\n  document.body.addEventListener('mouseenter', () => cursor.classList.remove('hide'));\n\n  document.body.addEventListener('mouseover', (e) => {\n    const el = e.target.closest('a, button, input[type=\"submit\"], [data-cursor-hover]');\n    if (el && cachedIsDesktop) cursor.classList.add('hover');\n  });\n\n  document.body.addEventListener('mouseout', (e) => {\n    if (!cachedIsDesktop) return;\n\n    if (e.relatedTarget && e.target.contains(e.relatedTarget)) return;\n\n    const el = e.target.closest(\n      'a, button, input[type=\"submit\"], [data-cursor-hover]'\n    );\n    if (el) cursor.classList.remove('hover');\n  });\n\n});\n\n// Fake terminal boot\nconst term = document.getElementById('term');\nconst replayBtn = document.querySelector('.term-replay');\n\nconst terminalLines = [\n  'Booting runtime...',\n  'Loading config... OK',\n  'Connecting to database... OK',\n  'Starting worker pool... OK',\n  '',\n  'GET /about HTTP/1.1',\n  'Host: hirusha.dev',\n  '',\n  'HTTP/1.1 200 OK',\n  'Content-Type: application/json',\n  'Cache-Control: no-store',\n  '',\n  '{',\n  '  \"name\": \"Hirusha Himath\",',\n  '  \"role\": \"Backend & Automation Engineer\",',\n  '  \"location\": \"Sri Lanka\",',\n  '  \"focus\": [',\n  '    \"backend systems\",',\n  '    \"automation\",',\n  '    \"APIs\",',\n  '    \"reliability-first design\"',\n  '  ],',\n  '  \"availability\": \"open_to_work\"',\n  '}'\n];\n\nlet lineIndex = 0;\n\nfunction playTerminal() {\n  term.textContent = '';\n  lineIndex = 0;\n\n  function step() {\n    if (lineIndex >= terminalLines.length) return;\n    term.textContent += terminalLines[lineIndex++] + '\\n';\n    setTimeout(step, 180);\n  }\n\n  step();\n}\n\n\n// Initial run\nplayTerminal();\n\n// Replay handler\nreplayBtn?.addEventListener('click', playTerminal);\n\n\n// Auto-grow textarea in contact form.\nconst messageTextarea = document.querySelector('#contact textarea');\n\nif (messageTextarea) {\n  const autoResize = () => {\n    messageTextarea.style.height = 'auto';\n    messageTextarea.style.height = messageTextarea.scrollHeight + 'px';\n  };\n\n  messageTextarea.addEventListener('input', autoResize);\n  autoResize();\n}\n\n// Contact form submission logic\nconst form = document.getElementById('contact-form');\nconst statusEl = document.getElementById('form-status');\n\nif (form) {\n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    const submitBtn = form?.querySelector('button[type=\"submit\"]');\n    const email = form.email.value.trim();\n    const msg = form.msg.value.trim();\n\n    // Basic validation\n    // Email empty\n    if (!email) {\n      setStatus('Email is required.', true);\n      return;\n    }\n\n    // Email format\n    if (!isValidEmail(email)) {\n      setStatus('Please enter a valid email address.', true);\n      return;\n    }\n\n    // Message empty\n    if (!msg) {\n      setStatus('Message is required.', true);\n      return;\n    }\n\n    // Message length\n    if (msg.length < 10) {\n      setStatus('Message must be at least 10 characters.', true);\n      return;\n    }\n\n    // Check for message length limit (pls dont be stupid)\n    if (msg.length > 3000) {\n      setStatus('Message is too long.', true);\n      return;\n    }\n\n    const payload = {\n      name: 'Portfolio Contact',\n      email,\n      subject: 'New contact from portfolio',\n      msg\n    };\n\n    setStatus('Sendingâ€¦');\n    submitBtn.disabled = true;\n    form.setAttribute('aria-busy', 'true');\n\n    try {\n      const res = await fetch('https://contact.git-itzfork.workers.dev', {\n        method: 'POST',\n        headers: {\n          'content-type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n\n      if (!res.ok) {\n        throw new Error('Request failed');\n      }\n\n      setStatus('Message sent successfully.');\n      form.reset();\n      submitBtn.disabled = false;\n      form.removeAttribute('aria-busy');\n\n    } catch (err) {\n      setStatus('Failed to send message. Try again later.', true);\n      submitBtn.disabled = false;\n      form.removeAttribute('aria-busy');\n\n    }\n  });\n}\n\n// Email validation\nfunction isValidEmail(email) {\n  const EMAIL_REGEX =\n    /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@([a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,}$/;\n\n  return email.length <= 254 && EMAIL_REGEX.test(email);\n}\n\n// Status message handler\nfunction setStatus(message, isError = false) {\n  statusEl.textContent = message;\n  statusEl.style.color = isError ? '#ff6b6b' : '#2dd4bf';\n}\n"],"names":["buttons","document","querySelectorAll","islands","isDesktop","window","matchMedia","matches","cachedIsDesktop","addEventListener","forEach","btn","target","getElementById","dataset","b","classList","remove","removeAttribute","add","setAttribute","i","toggle","focus","preventScroll","scrollIntoView","behavior","block","cursor","querySelector","mouseX","mouseY","rafId","e","clientX","clientY","requestAnimationFrame","style","transform","body","el","closest","relatedTarget","contains","term","replayBtn","terminalLines","lineIndex","playTerminal","textContent","step","length","setTimeout","messageTextarea","autoResize","height","scrollHeight","form","statusEl","isValidEmail","email","EMAIL_REGEX","test","setStatus","message","isError","color","preventDefault","submitBtn","value","trim","msg","disabled","res","fetch","method","headers","JSON","stringify","name","subject","ok","Error","reset","err"],"version":3,"file":"personal_site.0e8a5371.js.map"}